<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard - Quiz Results</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
        th { background-color: #f5f5f5; }
        .loading { color: #666; font-style: italic; }
    </style>
</head>
<body>
    <h1>üìä Quiz Results Dashboard</h1>
    <div id="results">
        <p class="loading">Loading results...</p>
    </div>

    <script>
        async function loadResults() {
            try {
                // Load from GitHub
                const response = await fetch('https://raw.githubusercontent.com/abhi1628/Quiz/main/quiz-results.json');
                const results = await response.json();
                
                // Load from localStorage (fallback)
                const localResults = JSON.parse(localStorage.getItem('localQuizResults') || '[]');
                const allResults = [...results, ...localResults];
                
                displayResults(allResults);
            } catch (error) {
                document.getElementById('results').innerHTML = 
                    '<p>‚ùå Error loading results. Please check console for details.</p>';
                console.error('Loading error:', error);
            }
        }

        function displayResults(results) {
            if (results.length === 0) {
                document.getElementById('results').innerHTML = '<p>No results yet.</p>';
                return;
            }

            let html = `
                <p><strong>Total Results:</strong> ${results.length}</p>
                <table>
                    <tr>
                        <th>Student</th><th>Roll No</th><th>Subject</th>
                        <th>Score</th><th>Time</th><th>Date</th>
                    </tr>
            `;
            
            results.forEach(result => {
                html += `
                    <tr>
                        <td>${result.studentName}</td>
                        <td>${result.rollNumber}</td>
                        <td>${result.subject}</td>
                        <td>${result.score}/${result.maxScore}</td>
                        <td>${result.timeSpent}</td>
                        <td>${new Date(result.timestamp).toLocaleString()}</td>
                    </tr>
                `;
            });
            
            html += '</table>';
            document.getElementById('results').innerHTML = html;
        }

        loadResults();
    </script>
</body>
</html>

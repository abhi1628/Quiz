<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard - Quiz Results</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fb;
            color: #333;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        header h1 {
            color: #3a7bd5;
            font-weight: 600;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .user-info img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #3a7bd5;
        }
        
        /* Dashboard Cards */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            text-align: center;
        }
        
        .card i {
            font-size: 30px;
            margin-bottom: 15px;
            color: #3a7bd5;
        }
        
        .card h3 {
            font-size: 28px;
            margin-bottom: 5px;
            color: #3a7bd5;
        }
        
        .card p {
            color: #777;
        }
        
        /* Filters */
        .filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            background: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }
        
        .filter-item {
            display: flex;
            flex-direction: column;
        }
        
        .filter-item label {
            margin-bottom: 5px;
            font-weight: 500;
            color: #495057;
        }
        
        .filter-item select, .filter-item input {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            min-width: 150px;
        }
        
        /* Table Styles */
        .table-container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #495057;
            cursor: pointer;
        }
        
        th:hover {
            background-color: #e9ecef;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        .status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status.completed {
            background-color: #e6f4ea;
            color: #138a54;
        }
        
        /* Real-time notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4caf50;
            color: white;
            padding: 15px 20px;
            border-radius: 5px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 1000;
            animation: slideIn 0.5s forwards;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .filters {
                flex-direction: column;
            }
            
            .filter-item {
                width: 100%;
            }
            
            .filter-item select, .filter-item input {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-chart-line"></i> Quiz Results Dashboard</h1>
            <div class="user-info">
                <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Teacher">
                <div>
                    <h4>Dr. Sarah Johnson</h4>
                    <p>Computer Science Department</p>
                </div>
            </div>
        </header>

        <!-- Dashboard Cards -->
        <div class="dashboard-cards">
            <div class="card">
                <i class="fas fa-users"></i>
                <h3 id="total-students">0</h3>
                <p>Total Students</p>
            </div>
            <div class="card">
                <i class="fas fa-check-circle"></i>
                <h3 id="total-submissions">0</h3>
                <p>Submissions</p>
            </div>
            <div class="card">
                <i class="fas fa-percentage"></i>
                <h3 id="average-score">0</h3>
                <p>Average Score</p>
            </div>
            <div class="card">
                <i class="fas fa-clock"></i>
                <h3 id="average-time">00:00</h3>
                <p>Average Time</p>
            </div>
        </div>

        <!-- Filters -->
        <div class="filters">
            <div class="filter-item">
                <label for="subject">Subject</label>
                <select id="subject">
                    <option value="all">All Subjects</option>
                    <option value="Python">Python</option>
                    <option value="Java">Java</option>
                    <option value="Web Development">Web Development</option>
                </select>
            </div>
            <div class="filter-item">
                <label for="date">Date</label>
                <input type="date" id="date">
            </div>
            <div class="filter-item">
                <label for="score">Min Score</label>
                <select id="score">
                    <option value="0">All Scores</option>
                    <option value="3">3+</option>
                    <option value="4">4+</option>
                    <option value="4.5">4.5+</option>
                </select>
            </div>
            <div class="filter-item">
                <label for="search">Search</label>
                <input type="text" id="search" placeholder="Student name or ID">
            </div>
        </div>

        <!-- Submissions Table -->
        <div class="table-container">
            <h3>Quiz Submissions</h3>
            <table id="results-table">
                <thead>
                    <tr>
                        <th>Student Name <i class="fas fa-sort"></i></th>
                        <th>Roll Number <i class="fas fa-sort"></i></th>
                        <th>Subject <i class="fas fa-sort"></i></th>
                        <th>Score <i class="fas fa-sort"></i></th>
                        <th>Max Score <i class="fas fa-sort"></i></th>
                        <th>Time Spent <i class="fas fa-sort"></i></th>
                        <th>Submission Time <i class="fas fa-sort"></i></th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="results-body">
                    <tr>
                        <td colspan="8" style="text-align: center;">No submissions yet</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Real-time notification -->
        <div class="notification" id="notification">
            New quiz submission received!
        </div>
    </div>

    <script>
        // Store quiz results
        let quizResults = [];
        
        // DOM elements
        const resultsBody = document.getElementById('results-body');
        const totalStudentsEl = document.getElementById('total-students');
        const totalSubmissionsEl = document.getElementById('total-submissions');
        const averageScoreEl = document.getElementById('average-score');
        const averageTimeEl = document.getElementById('average-time');
        const notificationEl = document.getElementById('notification');
        
        // Initialize the dashboard
        function initDashboard() {
            // Load any existing results from localStorage
            const storedResults = localStorage.getItem('quizResults');
            if (storedResults) {
                quizResults = JSON.parse(storedResults);
                updateDashboard();
            }
            
            // Simulate receiving new submissions (for demo purposes)
            setInterval(() => {
                // 20% chance of receiving a new submission each interval
                if (Math.random() < 0.2) {
                    simulateNewSubmission();
                }
            }, 10000); // Check every 10 seconds
        }
        
        // Update the dashboard with current results
        function updateDashboard() {
            // Update table
            if (quizResults.length === 0) {
                resultsBody.innerHTML = '<tr><td colspan="8" style="text-align: center;">No submissions yet</td></tr>';
            } else {
                resultsBody.innerHTML = '';
                quizResults.forEach(result => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${result.studentName}</td>
                        <td>${result.rollNumber}</td>
                        <td>${result.subject}</td>
                        <td>${result.score}</td>
                        <td>${result.maxScore}</td>
                        <td>${result.timeSpent}</td>
                        <td>${new Date(result.timestamp).toLocaleString()}</td>
                        <td><span class="status completed">Completed</span></td>
                    `;
                    resultsBody.appendChild(row);
                });
            }
            
            // Update stats
            updateStats();
        }
        
        // Update statistics
        function updateStats() {
            if (quizResults.length === 0) {
                totalStudentsEl.textContent = '0';
                totalSubmissionsEl.textContent = '0';
                averageScoreEl.textContent = '0';
                averageTimeEl.textContent = '00:00';
                return;
            }
            
            // Count unique students
            const uniqueStudents = new Set(quizResults.map(r => r.rollNumber));
            totalStudentsEl.textContent = uniqueStudents.size;
            
            // Total submissions
            totalSubmissionsEl.textContent = quizResults.length;
            
            // Average score
            const totalScore = quizResults.reduce((sum, result) => sum + parseFloat(result.score), 0);
            const avgScore = totalScore / quizResults.length;
            averageScoreEl.textContent = avgScore.toFixed(2);
            
            // Average time (in seconds for calculation)
            const totalSeconds = quizResults.reduce((sum, result) => {
                const timeParts = result.timeSpent.split(':');
                return sum + (parseInt(timeParts[0]) * 60) + parseInt(timeParts[1]);
            }, 0);
            
            const avgSeconds = totalSeconds / quizResults.length;
            const minutes = Math.floor(avgSeconds / 60);
            const seconds = Math.floor(avgSeconds % 60);
            averageTimeEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Show notification for new submission
        function showNotification() {
            notificationEl.style.display = 'block';
            setTimeout(() => {
                notificationEl.style.display = 'none';
            }, 3000);
        }
        
        // Add a new submission
        function addSubmission(result) {
            quizResults.unshift(result); // Add to beginning of array
            localStorage.setItem('quizResults', JSON.stringify(quizResults));
            updateDashboard();
            showNotification();
        }
        
        // Simulate a new submission (for demo purposes)
        function simulateNewSubmission() {
            const subjects = ['Python', 'Java', 'Web Development'];
            const names = ['Rajesh Kumar', 'Priya Sharma', 'Amit Patel', 'Sneha Gupta', 'Vikram Singh'];
            
            const newResult = {
                studentName: names[Math.floor(Math.random() * names.length)],
                rollNumber: `0246IT24MT${Math.floor(Math.random() * 50).toString().padStart(2, '0')}`,
                subject: subjects[Math.floor(Math.random() * subjects.length)],
                score: (4 + Math.random()).toFixed(2),
                maxScore: '4.65',
                timeSpent: `${Math.floor(Math.random() * 5).toString().padStart(2, '0')}:${Math.floor(Math.random() * 60).toString().padStart(2, '0')}`,
                timestamp: new Date().toISOString(),
                checksum: Math.random().toString(36).substring(2, 10)
            };
            
            addSubmission(newResult);
        }
        
        // Add Abhishek's submission when the page loads
        window.addEventListener('load', () => {
            // Add Abhishek's result
            const abhishekResult = {
                studentName: "Abhishek",
                rollNumber: "0246IT24MT06",
                subject: "Python",
                score: "4.65",
                maxScore: "4.65",
                timeSpent: "00:18",
                timestamp: "2025-08-23T04:56:00.533Z",
                checksum: "QWJoaXNoZWsw"
            };
            
            addSubmission(abhishekResult);
            initDashboard();
        });
    </script>
</body>
</html>
